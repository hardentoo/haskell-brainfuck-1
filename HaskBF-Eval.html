<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HaskBF.Eval</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_HaskBF-Eval.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">haskell-brainfuck-0.1.0.0: BrainFuck interpreter</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Sebastian Galkin, 2014</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>paraseba@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">HaskBF.Eval</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module exports functions that allow to evaluate a BrainFuck program.
Evaluation supports two types of error, parsing and execution, by returning
instances of <code><a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></code></p><p>This module should be all library users need to import.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:eval">eval</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m -&gt; <a href="HaskBF-Parser.html#t:Program">Program</a> -&gt; m (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Either.html#t:Either">Either</a> <a href="HaskBF-Tape.html#t:BFExError">BFExError</a> <a href="HaskBF-Tape.html#t:BFTape">BFTape</a>)</li><li class="src short"><a href="#v:evalBS">evalBS</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; m <a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></li><li class="src short"><a href="#v:evalStr">evalStr</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; m <a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:EvalResult">EvalResult</a><ul class="subs"><li>= <a href="#v:EvalSuccess">EvalSuccess</a> <a href="HaskBF-Tape.html#t:BFTape">BFTape</a></li><li>| <a href="#v:EvalExecError">EvalExecError</a> <a href="HaskBF-Tape.html#t:BFExError">BFExError</a></li><li>| <a href="#v:EvalParseError">EvalParseError</a> ParseError</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Machine">Machine</a> m = <a href="#v:Machine">Machine</a> {<ul class="subs"><li><a href="#v:putByte">putByte</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a> -&gt; m ()</li><li><a href="#v:getByte">getByte</a> :: m <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a></li></ul>}</li><li class="src short"><a href="#v:defaultIOMachine">defaultIOMachine</a> :: <a href="HaskBF-Eval.html#t:Machine">Machine</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a></li><li class="src short"><a href="#v:simulatorMachine">simulatorMachine</a> :: <a href="HaskBF-Eval.html#t:Machine">Machine</a> (<a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a> <a href="HaskBF-Eval.html#t:SimState">SimState</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:SimState">SimState</a> = <a href="#v:SimState">SimState</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>] [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>]</li><li class="src short"><a href="#v:simStateOutput">simStateOutput</a> :: <a href="HaskBF-Eval.html#t:SimState">SimState</a> -&gt; [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>]</li><li class="src short"><a href="#v:emptyState">emptyState</a> :: <a href="HaskBF-Eval.html#t:SimState">SimState</a></li><li class="src short">module <a href="HaskBF-Tape.html">HaskBF.Tape</a></li><li class="src short">module <a href="HaskBF-Parser.html">HaskBF.Parser</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:eval" class="def">eval</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m</td><td class="doc"><p>The machine used to do I/O</p></td></tr><tr><td class="src">-&gt; <a href="HaskBF-Parser.html#t:Program">Program</a></td><td class="doc"><p>The program to evaluate</p></td></tr><tr><td class="src">-&gt; m (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Either.html#t:Either">Either</a> <a href="HaskBF-Tape.html#t:BFExError">BFExError</a> <a href="HaskBF-Tape.html#t:BFTape">BFTape</a>)</td><td class="doc"><p>Resulting tape after evaluation or
 execution error</p></td></tr></table></div><div class="doc"><p>Evaluate a parsed BrainFuck program using I/O provided by the given
 - <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code>
 -
 - The result is either an execution error or the <code><a href="HaskBF-Tape.html#t:BFTape">BFTape</a></code> representing the
 - resulting state of the tape after the last instruction was executed. </p></div></div><div class="top"><p class="src"><a name="v:evalBS" class="def">evalBS</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m</td><td class="doc"><p>The machine used to do I/O</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc"><p>The code to evaluate</p></td></tr><tr><td class="src">-&gt; m <a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></td><td class="doc"><p>Parsing/evaluation result</p></td></tr></table></div><div class="doc"><p>Evaluate an unparsed BrainFuck program using I/O provided by the given
 - <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code>
 -
 - The result is returned as an <code><a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></code> </p></div></div><div class="top"><p class="src"><a name="v:evalStr" class="def">evalStr</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="HaskBF-Eval.html#t:Machine">Machine</a> m</td><td class="doc"><p>The machine used to do I/O</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a></td><td class="doc"><p>The code to evaluate</p></td></tr><tr><td class="src">-&gt; m <a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></td><td class="doc"><p>Parsing/evaluation result</p></td></tr></table></div><div class="doc"><p>Evaluate an unparsed BrainFuck program using I/O provided by the given
 - <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code>
 -
 - The result is returned as an <code><a href="HaskBF-Eval.html#t:EvalResult">EvalResult</a></code> </p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:EvalResult" class="def">EvalResult</a></p><div class="doc"><p>Evaluation result of an unparsed BrainFuck program</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:EvalSuccess" class="def">EvalSuccess</a> <a href="HaskBF-Tape.html#t:BFTape">BFTape</a></td><td class="doc"><p>Parsing and evaluation were successful. The resulting
                   - state of the tape after the last instruction
                   - was executed. </p></td></tr><tr><td class="src"><a name="v:EvalExecError" class="def">EvalExecError</a> <a href="HaskBF-Tape.html#t:BFExError">BFExError</a></td><td class="doc"><p>The program was parsed successfully but evaluation
                   - failed.
                   - The reason for failure is overflowing a limit of the tape.
                   - The state of the tape before the error is included </p></td></tr><tr><td class="src"><a name="v:EvalParseError" class="def">EvalParseError</a> ParseError</td><td class="doc"><p>The program can not be parsed. Parsing error message is
                   - included </p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Machine" class="def">Machine</a> m</p><div class="doc"><p>Underlying input output for the evaluation machine. Changing the monad <code>m</code>
 - achives different results. For instance using the <code><a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a></code> monad an evaluator can
 - be created that does input<em>output to stdin</em>stdout. If the monad is <code><a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a></code>,
 - for instance, input/output can happen in memory.
 -
 - We offer two implementations of <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code>:
 -
 -   * <code><a href="HaskBF-Eval.html#v:defaultIOMachine">defaultIOMachine</a></code>: under the <code><a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a></code> monad, does input/output using the
 -   standard streams
 -   * <code><a href="HaskBF-Eval.html#v:simulatorMachine">simulatorMachine</a></code>: under the <code><a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a></code> monad, does input/output on lists
 -
 - It's easy to create other <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code>s by using different monads and
 - functions. </p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Machine" class="def">Machine</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:putByte" class="def">putByte</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a> -&gt; m ()</dt><dd class="doc"><p>Write a byte to the output, under
 monad <code>m</code></p></dd><dt class="src"><a name="v:getByte" class="def">getByte</a> :: m <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a></dt><dd class="doc"><p>Get a byte under the <code>m</code> monad</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:defaultIOMachine" class="def">defaultIOMachine</a> :: <a href="HaskBF-Eval.html#t:Machine">Machine</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a></p><div class="doc"><p>A <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code> that can evaluate code under the <code><a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a></code> monad by doing I/O
 - to stdin/stout.
 -
 - Bytes are read by comnverting them from the ASCII code </p></div></div><div class="top"><p class="src"><a name="v:simulatorMachine" class="def">simulatorMachine</a> :: <a href="HaskBF-Eval.html#t:Machine">Machine</a> (<a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a> <a href="HaskBF-Eval.html#t:SimState">SimState</a>)</p><div class="doc"><p>A <code><a href="HaskBF-Eval.html#t:Machine">Machine</a></code> that can evaluate program doing in-memory I/O under the <code><a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a></code>
 - monad. It stores state as <code><a href="HaskBF-Eval.html#t:SimState">SimState</a></code> </p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:SimState" class="def">SimState</a></p><div class="doc"><p>State used by <code><a href="HaskBF-Eval.html#v:simulatorMachine">simulatorMachine</a></code> to evaluate code under the <code><a href="file:///usr/share/doc/haskell-mtl/html/Control-Monad-State-Lazy.html#t:State">State</a></code> monad
 -
 - It maintains input and output bytes inside lists </p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SimState" class="def">SimState</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>] [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:simStateOutput" class="def">simStateOutput</a> :: <a href="HaskBF-Eval.html#t:SimState">SimState</a> -&gt; [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int8">Int8</a>]</p><div class="doc"><p>Extract the output stream from a <code><a href="HaskBF-Eval.html#v:simulatorMachine">simulatorMachine</a></code> state</p></div></div><div class="top"><p class="src"><a name="v:emptyState" class="def">emptyState</a> :: <a href="HaskBF-Eval.html#t:SimState">SimState</a></p><div class="doc"><p>Initial <code><a href="HaskBF-Eval.html#v:simulatorMachine">simulatorMachine</a></code> state</p></div></div><div class="top"><p class="src">module <a href="HaskBF-Tape.html">HaskBF.Tape</a></p></div><div class="top"><p class="src">module <a href="HaskBF-Parser.html">HaskBF.Parser</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>